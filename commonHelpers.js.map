{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\nimport axios from 'axios';\n\nexport async function searchPhotos(query, page = 1) {\n  const searchParams = new URLSearchParams({\n    key: '43803497-a801e9cfe7ea9bdd19d306bb3',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error;\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const listImg = document.querySelector('.list');\nlet lightbox;\n\nexport const markupInterface = (data) => {\n  const markup = data.hits.map((hit) => {\n    return `\n      <li class=\"item-list\">\n        <a href=\"${hit.largeImageURL}\" class=\"item-list-link\">\n            <img class=\"item-list-img\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\">\n        </a>\n        <div class='markup-info'>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Likes</h3>\n                <p class=\"item-list-text\">${hit.likes}</p>\n            </div>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Views</h3>\n                <p class=\"item-list-text\">${hit.views}</p>\n            </div>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Comments</h3>\n                <p class=\"item-list-text\">${hit.comments}</p>\n            </div>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Downloads</h3>\n                <p class=\"item-list-text\">${hit.downloads}</p>\n            </div>\n        </div>\n      </li>\n    `;\n  }).join('');\n  \n  if (data.page === 1) {\n    listImg.innerHTML = markup;\n  } else {\n    listImg.insertAdjacentHTML('beforeend', markup);\n  }\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.item-list-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      overlayOpacity: 0.8,\n    });\n  } else {\n    lightbox.refresh();\n  }\n};","import { searchPhotos } from './js/pixabay-api.js';\nimport { markupInterface, listImg } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchButton = document.querySelector('.searchButton');\nconst loadMoreButton = document.querySelector('.load-more');\nconst input = document.querySelector('.input');\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nconst clearInput = () => {\n  input.value = '';\n};\n\nconst showLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n};\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n};\n\nconst handleSearch = async (event) => {\n  event.preventDefault();\n  query = input.value.trim();\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: 'The search field cannot be empty! Please enter the search query!',\n    });\n    return;\n  }\n\n  page = 1;\n  loadMoreButton.style.display = 'none';\n  listImg.innerHTML = '';\n\n  try {\n    showLoader();\n    const data = await searchPhotos(query, page);\n    hideLoader();\n    totalHits = data.totalHits;\n    markupInterface(data);\n\n    if (totalHits > 15) {\n      loadMoreButton.style.display = 'block';\n    }\n\n    if (totalHits === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching data. Please try again later.',\n    });\n  }\n\n  clearInput();\n};\n\nconst handleLoadMore = async () => {\n  page += 1;\n  \n  try {\n    showLoader();\n    const data = await searchPhotos(query, page);\n    hideLoader();\n    markupInterface(data);\n\n    const totalLoadedImages = listImg.childElementCount;\n\n    if (totalLoadedImages >= totalHits) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n\n    const { height: cardHeight } = document.querySelector('.item-list').getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while loading more images. Please try again later.',\n    });\n  }\n};\n\nsearchButton.addEventListener('click', handleSearch);\nloadMoreButton.addEventListener('click', handleLoadMore);"],"names":["searchPhotos","query","page","searchParams","axios","error","listImg","lightbox","markupInterface","data","markup","hit","SimpleLightbox","searchButton","loadMoreButton","input","totalHits","clearInput","showLoader","loader","hideLoader","handleSearch","event","iziToast","handleLoadMore","cardHeight"],"mappings":"owBAIO,eAAeA,EAAaC,EAAOC,EAAO,EAAG,CAClD,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,CAAG,EAED,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,4BAA4BD,CAAY,EAAE,GAC3D,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAwBA,CAAK,EACrCA,CACP,CACH,CCnBO,MAAMC,EAAU,SAAS,cAAc,OAAO,EACrD,IAAIC,EAEG,MAAMC,EAAmBC,GAAS,CACvC,MAAMC,EAASD,EAAK,KAAK,IAAKE,GACrB;AAAA;AAAA,mBAEQA,EAAI,aAAa;AAAA,8CACUA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4CAKpCA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,4CAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,4CAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,4CAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,KAKtD,EAAE,KAAK,EAAE,EAENF,EAAK,OAAS,EAChBH,EAAQ,UAAYI,EAEpBJ,EAAQ,mBAAmB,YAAaI,CAAM,EAG3CH,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAIK,EAAe,kBAAmB,CAC/C,aAAc,MACd,aAAc,IACd,eAAgB,EACtB,CAAK,CAIL,EC7CMC,EAAe,SAAS,cAAc,eAAe,EACrDC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAQ,SAAS,cAAc,QAAQ,EAC7C,IAAId,EAAQ,GACRC,EAAO,EACPc,EAAY,EAEhB,MAAMC,EAAa,IAAM,CACvBF,EAAM,MAAQ,EAChB,EAEMG,EAAa,IAAM,CACvB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OACzB,EAEMC,EAAa,IAAM,CACvB,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MACzB,EAEME,EAAe,MAAOC,GAAU,CAIpC,GAHAA,EAAM,eAAc,EACpBrB,EAAQc,EAAM,MAAM,OAEhB,CAACd,EAAO,CACVsB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kEACf,CAAK,EACD,MACD,CAEDrB,EAAO,EACPY,EAAe,MAAM,QAAU,OAC/BR,EAAQ,UAAY,GAEpB,GAAI,CACFY,IACA,MAAMT,EAAO,MAAMT,EAAaC,EAAOC,CAAI,EAC3CkB,IACAJ,EAAYP,EAAK,UACjBD,EAAgBC,CAAI,EAEhBO,EAAY,KACdF,EAAe,MAAM,QAAU,SAG7BE,IAAc,GAChBO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0EACjB,CAAO,CAEJ,MAAe,CACdH,IACAG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gEACf,CAAK,CACF,CAEDN,GACF,EAEMO,EAAiB,SAAY,CACjCtB,GAAQ,EAER,GAAI,CACFgB,IACA,MAAMT,EAAO,MAAMT,EAAaC,EAAOC,CAAI,EAC3CkB,IACAZ,EAAgBC,CAAI,EAEMH,EAAQ,mBAETU,IACvBF,EAAe,MAAM,QAAU,OAC/BS,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACjB,CAAO,GAIH,KAAM,CAAE,OAAQE,GAAe,SAAS,cAAc,YAAY,EAAE,wBACpE,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,MAAe,CACdL,IACAG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,sEACf,CAAK,CACF,CACH,EAEAV,EAAa,iBAAiB,QAASQ,CAAY,EACnDP,EAAe,iBAAiB,QAASU,CAAc"}